<template>
  <div class="slds-box slds-theme_default">
    <div class="slds-form-element">
      <div class="slds-form-element__control">
        <div class="slds-combobox_container">
          <div
            class="slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-is-open"
          >
            <div
              class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right"
              role="none"
            >
              <lightning-input
                type="search"
                label="Account"
                placeholder="Search Accounts"
                onchange={changeHandler}
                class="slds-var-p-left_small slds-var-p-right_small"
              ></lightning-input>
            </div>
            <template lwc:if={showPillContainer}>
              <lightning-pill-container
                items={selectedRecords}
                onitemremove={handleItemRemove}
              ></lightning-pill-container>
            </template>
            <template lwc:if={displayOutput}>
              <div
                id="listbox-id-2"
                class="slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid"
                role="listbox"
                tabindex="0"
                aria-busy="false"
              >
                <ul
                  class="slds-listbox slds-listbox_vertical"
                  role="presentation"
                >
                  <template for:each={accounts} for:item="account">
                    <li
                      role="presentation"
                      class="slds-listbox__item"
                      key={account.Id}
                      onclick={clickHandler}
                    >
                      <div
                        id="option16"
                        class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
                        role="option"
                      >
                        <span
                          class="slds-media__figure slds-listbox__option-icon"
                        >
                          <span
                            class="slds-icon_container slds-icon-standard-account"
                          >
                            <lightning-icon
                              icon-name="standard:account"
                              size="small"
                            ></lightning-icon>
                          </span>
                        </span>
                        <span class="slds-media__body">
                          <span
                            class="slds-listbox__option-text slds-listbox__option-text_entity"
                            data-recid={account.Id}
                            >{account.Name}</span
                          >
                        </span>
                      </div>
                    </li>
                  </template>
                </ul>
              </div>
            </template>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
